<div class="itineraries-container">
  <div class="header">
    <h1>My Itineraries</h1>
    <div class="header-actions">
      <button class="btn-primary" (click)="showAddForm = !showAddForm">
        {{ showAddForm ? 'Cancel' : 'Add New Itinerary' }}
      </button>
      <button class="btn-secondary" (click)="logout()">
        Logout
      </button>
    </div>
  </div>

  <!-- Add New Itinerary Form -->
  <div class="add-form" *ngIf="showAddForm">
    <h3>Create New Itinerary</h3>
    <form (ngSubmit)="addItinerary()">
      <div class="form-group">
        <label for="title">Itinerary Title:</label>
        <input 
          type="text" 
          id="title" 
          [(ngModel)]="newItinerary.title" 
          name="title" 
          placeholder="e.g., Summer Trip to Italy"
          required>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="country">Country:</label>
          <input 
            type="text" 
            id="country" 
            [(ngModel)]="newItinerary.country" 
            name="country" 
            placeholder="e.g., Italy"
            required>
        </div>
        
        <div class="form-group">
          <label for="city">City:</label>
          <input 
            type="text" 
            id="city" 
            [(ngModel)]="newItinerary.city" 
            name="city" 
            placeholder="e.g., Rome"
            required>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="startDate">Start Date:</label>
          <input 
            type="date" 
            id="startDate" 
            [(ngModel)]="newItinerary.startDate" 
            name="startDate"
            required>
        </div>
        
        <div class="form-group">
          <label for="endDate">End Date:</label>
          <input 
            type="date" 
            id="endDate" 
            [(ngModel)]="newItinerary.endDate" 
            name="endDate"
            required>
        </div>
      </div>
      
      <div class="form-group">
        <label for="notes">Notes (Optional):</label>
        <textarea 
          id="notes" 
          [(ngModel)]="newItinerary.notes" 
          name="notes" 
          placeholder="Any special notes about this trip..."
          rows="3"></textarea>
      </div>
      
      <div class="form-actions">
        <button type="submit" class="btn-primary">Create Itinerary</button>
        <button type="button" class="btn-secondary" (click)="showAddForm = false">Cancel</button>
      </div>
    </form>
  </div>

  <!-- Edit Itinerary Form -->
  <div class="edit-form" *ngIf="showEditForm && editingItinerary">
    <h3>Edit Itinerary</h3>
    <form (ngSubmit)="saveEdit()">
      <div class="form-group">
        <label for="editTitle">Itinerary Title:</label>
        <input 
          type="text" 
          id="editTitle" 
          [(ngModel)]="editingItinerary.title" 
          name="editTitle" 
          placeholder="e.g., Summer Trip to Italy"
          required>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="editCountry">Country:</label>
          <input 
            type="text" 
            id="editCountry" 
            [(ngModel)]="editingItinerary.country" 
            name="editCountry" 
            placeholder="e.g., Italy"
            required>
        </div>
        
        <div class="form-group">
          <label for="editCity">City:</label>
          <input 
            type="text" 
            id="editCity" 
            [(ngModel)]="editingItinerary.city" 
            name="editCity" 
            placeholder="e.g., Rome"
            required>
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label for="editStartDate">Start Date:</label>
          <input 
            type="date" 
            id="editStartDate" 
            [(ngModel)]="editingItinerary.startDate" 
            name="editStartDate"
            required>
        </div>
        
        <div class="form-group">
          <label for="editEndDate">End Date:</label>
          <input 
            type="date" 
            id="editEndDate" 
            [(ngModel)]="editingItinerary.endDate" 
            name="editEndDate"
            required>
        </div>
      </div>
      
      <div class="form-group">
        <label for="editNotes">Notes (Optional):</label>
        <textarea 
          id="editNotes" 
          [(ngModel)]="editingItinerary.notes" 
          name="editNotes" 
          placeholder="Any special notes about this trip..."
          rows="3"></textarea>
      </div>
      
      <div class="form-actions">
        <button type="submit" class="btn-primary">Save Changes</button>
        <button type="button" class="btn-secondary" (click)="cancelEdit()">Cancel</button>
      </div>
    </form>
  </div>

  <!-- Itineraries List -->
  <div class="itineraries-list" *ngIf="itineraries.length > 0; else noItineraries">
    <div class="itinerary-card" *ngFor="let itinerary of itineraries">
      <div class="itinerary-header">
        <h3>{{ itinerary.title }}</h3>
        <div class="itinerary-actions">
          <button class="btn-icon" (click)="updateItinerary(itinerary)" title="Edit">
            ‚úèÔ∏è
          </button>
          <button class="btn-icon btn-danger" (click)="deleteItinerary(itinerary.id)" title="Delete">
            üóëÔ∏è
          </button>
        </div>
      </div>
      
      <div class="itinerary-details">
        <p><strong>Location:</strong> {{ itinerary.city }}, {{ itinerary.country }}</p>
        <p><strong>Duration:</strong> {{ itinerary.startDate }} to {{ itinerary.endDate }}</p>
        <p *ngIf="itinerary.totalCost"><strong>Total Cost:</strong> ${{ itinerary.totalCost | number:'1.2-2' }}</p>
        <p *ngIf="itinerary.notes"><strong>Notes:</strong> {{ itinerary.notes }}</p>
      </div>
      
      <div class="itinerary-footer">
        <button class="btn-primary" (click)="openItinerary(itinerary)">
          View Activities
        </button>
      </div>
    </div>
  </div>

  <!-- No Itineraries Message -->
  <ng-template #noItineraries>
    <div class="empty-state">
      <h3>No itineraries yet</h3>
      <p>Create your first itinerary to start planning your vacation!</p>
      <button class="btn-primary" (click)="showAddForm = true">
        Create Your First Itinerary
      </button>
    </div>
  </ng-template>
</div>
